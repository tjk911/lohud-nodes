<!DOCTYPE html>
<html>
  <head>
    <title>TagCanvas jQuery example</title>
    <!--[if lt IE 9]><script type="text/javascript" src="excanvas.js"></script><![endif]-->
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>
    <script src="js/vivagraph.js" type="text/javascript"></script>
    <style type="text/css" media="screen">
        html, body, svg { width: 100%; height: 100%;}
    </style>
    <script type="text/javascript">
        function main () {
            // Step 1. We create a graph object.
            var graph = Viva.Graph.graph();

            // Construct the graph
            graph.addNode('mamanorek', {url : 'http://mamkschoolspta.org/mhs/wp-content/themes/chatsworth/images/img-1.jpg'});
            graph.addNode('Dan Futterman', {url : 'https://secure.gravatar.com/avatar/c81bfc2cf23958504617dd4fada3afa8'});
            graph.addNode('Bennett Miller', {url : 'https://secure.gravatar.com/avatar/1c9054d6242bffd5fd25ec652a2b79cc'});
            graph.addNode('David O. Russell', {url : 'https://secure.gravatar.com/avatar/24a5b6e62e9a486743a71e0a0a4f71af'});
            graph.addNode("Michael O'Keefe", {url : 'https://secure.gravatar.com/avatar/01bce7702975191fdc402565bd1045a8?'});
            graph.addNode('Kevin Dillon', {url : 'https://secure.gravatar.com/avatar/13da974fc9716b42f5d62e3c8056c718'});
            graph.addNode('Matt Dillon', {url : 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd'});

            graph.addLink('mamanorek', 'Dan Futterman');
            graph.addLink('mamanorek', 'Bennett Miller');
            graph.addLink('mamanorek', 'David O. Russell');
            graph.addLink('mamanorek', "Michael O'Keefe");
            graph.addLink('mamanorek', 'Kevin Dillon');
            graph.addLink('mamanorek', 'Matt Dillon');

            graph.addLink('Dan Futterman', 'Bennett Miller');


            // Set custom nodes appearance
            var graphics = Viva.Graph.View.svgGraphics(),
                nodeSize = 24,
                // we use this method to highlight all realted links
                // when user hovers mouse over a node:
                highlightRelatedNodes = function(nodeId, isOn) {
                   // just enumerate all realted nodes and update link color:
                   graph.forEachLinkedNode(nodeId, function(node, link){
                       var linkUI = graphics.getLinkUI(link.id);
                       if (linkUI) {
                           // linkUI is a UI object created by graphics below
                           linkUI.attr('stroke', isOn ? 'red' : 'gray');
                       }
                   });
                };
            // Since we are using SVG we can easily subscribe to any supported
            // events (http://www.w3.org/TR/SVG/interact.html#SVGEvents ),
            // including mouse events:
            graphics.node(function(node) {
                var ui = Viva.Graph.svg('image')
                     .attr('width', nodeSize)
                     .attr('height', nodeSize)
                     .link('https://secure.gravatar.com/avatar/' + node.data);
                $(ui).click(function() { // mouse over
                    highlightRelatedNodes(node.id, true);
                });
                return ui;
            }).placeNode(function(nodeUI, pos) {
                nodeUI.attr('x', pos.x - nodeSize / 2).attr('y', pos.y - nodeSize / 2);
            });
            graphics.link(function(link){
                return Viva.Graph.svg('path')
                              .attr('stroke', 'gray');
            }).placeLink(function(linkUI, fromPos, toPos) {
                var data = 'M' + fromPos.x + ',' + fromPos.y +
                           'L' + toPos.x + ',' + toPos.y;
                linkUI.attr("d", data);
            })
            // Finally render the graph with our customized graphics object:
            var renderer = Viva.Graph.View.renderer(graph, {
                    graphics : graphics
                });
            renderer.run();
        }
    </script>
  </head>
  <body onload='main()'>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>